{{define "title"}}Reset Password{{end}}
{{define "content"}}
<div class="flex min-h-screen items-center justify-center bg-gray-50 px-4 py-12">
    <div class="w-full max-w-md space-y-8">
        <div>
            <a href="/" class="flex justify-center items-center gap-3 mb-4">
                <svg class="h-8 w-8 text-[#13a4ec]" fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                    <path clip-rule="evenodd" d="M24 4H42V17.3333V30.6667H24V44H6V30.6667V17.3333H24V4Z" fill="currentColor" fill-rule="evenodd"></path>
                </svg>
                <h1 class="text-3xl font-bold tracking-tight text-gray-900">Internist AI</h1>
            </a>
            <h2 class="mt-2 text-center text-2xl font-semibold tracking-tight text-gray-800">Set a new password</h2>
            <p class="mt-2 text-center text-sm text-gray-600">Enter the code we sent to your phone and choose a new password.</p>
        </div>

        {{if .Error}}
        <div class="rounded-md bg-red-50 p-4">
            <p class="text-sm font-medium text-red-800">{{.Error}}</p>
        </div>
        {{end}}

        <form action="/reset-password" class="mt-8 space-y-6" method="POST" onsubmit="return validatePassword()">
            <input type="hidden" name="phone_number" value="{{.Phone}}">
            <div class="rounded-md shadow-sm space-y-4">
                <div>
                    <label class="sr-only" for="reset_code">Reset Code</label>
                    <input class="form-input relative block w-full appearance-none rounded-md border border-gray-300 px-3 py-3 text-gray-900 placeholder-gray-500 focus:z-10 focus:border-[#13a4ec] focus:outline-none focus:ring-[#13a4ec] sm:text-sm" id="reset_code" name="reset_code" placeholder="6-digit reset code" required="" type="text" value="{{.Code}}">
                </div>
                <div>
                    <label class="sr-only" for="password">New Password</label>
                    <input autocomplete="new-password" class="form-input relative block w-full appearance-none rounded-md border border-gray-300 px-3 py-3 text-gray-900 placeholder-gray-500 focus:z-10 focus:border-[#13a4ec] focus:outline-none focus:ring-[#13a4ec] sm:text-sm" id="password" name="password" placeholder="New Password" required="" type="password">
                </div>
                 <div>
                    <label class="sr-only" for="confirm_password">Confirm New Password</label>
                    <input autocomplete="new-password" class="form-input relative block w-full appearance-none rounded-md border border-gray-300 px-3 py-3 text-gray-900 placeholder-gray-500 focus:z-10 focus:border-[#13a4ec] focus:outline-none focus:ring-[#13a4ec] sm:text-sm" id="confirm_password" name="confirm_password" placeholder="Confirm New Password" required="" type="password">
                </div>
            </div>
            <div>
                <button class="group relative flex w-full justify-center rounded-md border border-transparent bg-[#13a4ec] px-4 py-3 text-sm font-semibold text-white hover:bg-[#1085c2] focus:outline-none focus:ring-2 focus:ring-[#13a4ec] focus:ring-offset-2" type="submit">
                    Reset Password
                </button>
            </div>
        </form>
    </div>
</div>
<script>
    function validatePassword() {
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirm_password').value;
        if (password !== confirmPassword) {
            alert("Passwords do not match.");
            return false;
        }
        return true;
    }
</script>
{{end}}